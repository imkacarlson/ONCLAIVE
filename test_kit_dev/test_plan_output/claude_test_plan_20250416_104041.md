# Consolidated Test Plan for Plan Net

## Generated on: 2025-04-16 10:40:56

## Capability Statement

This test plan incorporates constraints and requirements from the Plan Net Capability Statement.

## Table of Contents

- [Client](#client)
  - [REQ-03: Consumer information restriction](#req-03)
- [Common Base Requirements](#common-base-requirements)
  - [REQ-06: Missing required data handling](#req-06)
- [Common Non-Resource Specific](#common-non-resource-specific)
  - [REQ-10: Missing information processing](#req-10)
- [General](#general)
  - [REQ-05: Absent optional element handling](#req-05)
- [General Requirements](#general-requirements)
  - [REQ-07: Must Support processing](#req-07)
- [General/Cross-Resource](#general/cross-resource)
  - [REQ-09: Missing data interpretation](#req-09)
- [General/Non-Resource-Specific](#general/non-resource-specific)
  - [REQ-04: Must Support data population](#req-04)
- [Server](#server)
  - [REQ-01: Authentication prohibition](#req-01)
  - [REQ-02: Consumer identification prohibition](#req-02)
- [Universal](#universal)
  - [REQ-08: Data display capability](#req-08)

## Test Specifications

<a id='client'></a>

## Client

<a id='req-03'></a>

### REQ-03: Consumer information restriction

**Description**: "Directory mobile applications shall not send consumer identifiable information when querying Plan-Net services"

**Actor**: Client Application

**Conformance**: SHALL NOT

# Test Specification for REQ-03

## 1. Requirement ID
REQ-03: Consumer Information Restriction

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically Testable
- **Justification**: The requirement can be verified through automated inspection of query parameters and payload content in requests to Plan-Net services

### Complexity
- **Level**: Moderate
- **Rationale**: While the concept is straightforward, comprehensive testing requires checking multiple potential locations where PII might be included in requests

### Prerequisites
- Access to Plan-Net service endpoints
- Test client application configured to make API requests
- Sample non-PII search parameters for valid queries
- List of prohibited PII fields/elements to check against

## 3. Test Implementation Strategy

### Required Inputs
- Valid non-PII search parameters (e.g., location coordinates, service types)
- Set of invalid PII test data including:
  - Patient names
  - Patient identifiers
  - Patient contact information
  - Other demographic information

### Required FHIR Operations
Test should cover common search operations where PII might be attempted:
- GET requests with query parameters
- POST-based searches
- _include and _revinclude parameters
- Custom search parameters

### Validation Criteria

#### Test Cases

1. **Basic Query Parameter Validation**
   - Assert: No query parameters contain patient names
   - Assert: No query parameters contain patient identifiers
   - Assert: No query parameters contain contact information

2. **Search Body Content Validation (for POST searches)**
   - Assert: Search body does not contain patient resource references
   - Assert: Search body does not contain PII in any custom parameters

3. **Custom Header Validation**
   - Assert: No custom headers contain PII
   - Assert: Authorization tokens do not contain embedded PII

#### Test Scenarios

1. **Positive Test Cases**
```
GET [base]/Location?near=40.7128|-74.0060|10|km
GET [base]/HealthcareService?specialty=cardiology
```
- Expected Result: Requests proceed normally

2. **Negative Test Cases**
```
GET [base]/Location?patient=12345
GET [base]/HealthcareService?patientName=JohnDoe
```
- Expected Result: Client application should prevent these requests from being sent

### Test Pass/Fail Criteria
Test PASSES if:
- All test scenarios using non-PII data successfully complete
- Client application prevents or blocks attempts to send PII
- No PII is detected in any request components

Test FAILS if:
- Any PII is detected in:
  - URL parameters
  - Request headers
  - Request body
  - Authorization tokens
  - Custom parameters

### Implementation Notes
1. Implement request interceptor in test framework to analyze all outgoing requests
2. Create regex patterns to detect common PII patterns
3. Maintain list of prohibited parameter names and values
4. Document any edge cases or ambiguous scenarios encountered during testing

### Limitations
- Test cannot guarantee detection of all possible forms of PII
- Some edge cases may require manual review
- Implementation-specific PII formats may need additional patterns

This specification assumes no special requirements from the Capability Statement as the requirement focuses on client-side behavior rather than server capabilities.

---



<a id='common-base-requirements'></a>

## Common Base Requirements

<a id='req-06'></a>

### REQ-06: Missing required data handling

**Description**: "Health Plan API shall provide reason for missing information using value set nullFlavors or dataAbsentReason extension when minimum cardinality is >0"

**Actor**: Health Plan API

**Conformance**: SHALL

# Test Specification for REQ-06

## 1. Requirement ID
REQ-06: Missing Required Data Handling

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically Testable
- **Rationale**: The requirement can be systematically tested by checking for the presence of either nullFlavor codes or dataAbsentReason extensions when required elements are not populated with actual data.

### Complexity
- **Level**: Moderate
- **Rationale**: Testing requires checking multiple resources and fields, with verification of correct usage of extensions or value sets.

### Prerequisites
- Access to Health Plan API endpoints
- Test dataset containing resources with missing required elements
- Knowledge of supported nullFlavor value set codes
- Access to dataAbsentReason extension definition

## 3. Test Implementation Strategy

### Required Inputs
1. FHIR Resources with required elements (min cardinality >0):
   - Patient resource missing required fields (e.g., name)
   - Observation resource missing required fields (e.g., status, code)
   - Coverage resource missing required fields (e.g., status, beneficiary)

### Required FHIR Operations
1. GET operations to retrieve resources with known missing required data
2. Search operations to find resources with specific missing elements

### Validation Criteria

#### Test Case 1: NullFlavor Usage
1. **Setup**:
   - Create/identify resources with missing required elements
   - Ensure nullFlavor codes are valid from the specified value set

2. **Assertions**:
   - Verify presence of nullFlavor code when required element is missing
   - Validate that nullFlavor code is from approved value set
   - Check that nullFlavor usage follows proper syntax

#### Test Case 2: DataAbsentReason Extension
1. **Setup**:
   - Create/identify resources with missing required elements
   - Configure dataAbsentReason extension

2. **Assertions**:
   - Verify presence of dataAbsentReason extension when required element is missing
   - Validate extension URL is correct
   - Verify extension value is appropriate for the missing data context

#### Test Case 3: Error Conditions
1. **Setup**:
   - Create resources with missing required elements but no explanation

2. **Assertions**:
   - Verify API returns appropriate error response
   - Confirm error message indicates missing required element
   - Validate error details suggest using nullFlavor or dataAbsentReason

### Specific Test Scenarios

1. **Basic Required Field Test**
```
GET [base]/Patient/[id]
Expected: Resource returns with either:
- nullFlavor code for missing required field
- dataAbsentReason extension for missing required field
```

2. **Multiple Missing Fields Test**
```
GET [base]/Observation/[id]
Expected: Each missing required field has appropriate explanation
- Multiple nullFlavors or dataAbsentReason extensions as needed
```

3. **Invalid Configuration Test**
```
GET [base]/Coverage/[id]
Expected: Error response when required field missing without explanation
```

### Pass/Fail Criteria
- **Pass**: All missing required elements have either valid nullFlavor codes or dataAbsentReason extensions
- **Fail**: Any missing required element lacks proper explanation or uses invalid codes/extensions

### Notes
- Implementation should test across multiple resource types
- Both nullFlavor and dataAbsentReason are acceptable - either one must be present
- Verify proper value set binding for nullFlavors
- Confirm correct structure of dataAbsentReason extension

---



<a id='common-non-resource-specific'></a>

## Common Non-Resource Specific

<a id='req-10'></a>

### REQ-10: Missing information processing

**Description**: "Consumer Apps shall process resource instances containing Must Support data elements that assert missing information"

**Actor**: Consumer App

**Conformance**: SHALL

# Test Specification for REQ-10

## 1. Requirement ID
REQ-10: Missing Information Processing

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically Testable
- **Reasoning**: Can create test cases with resources containing Must Support elements with missing information patterns and verify consumer app handling

### Complexity
- **Level**: Moderate
- **Reasoning**: Requires testing multiple missing information patterns across different Must Support elements and resources

### Prerequisites
- Consumer App must be operational and able to receive FHIR resources
- Test environment must support sending resources with various missing information patterns
- List of Must Support elements for relevant resources must be identified
- Documentation of expected app behavior for missing information scenarios

## 3. Test Implementation Strategy

### Required Inputs
1. FHIR Resources with Must Support elements containing:
   - Data Absent Reason extension
   - Null values where permitted
   - Empty elements where permitted
   - Missing optional Must Support elements

### Test Scenarios

#### Scenario 1: Data Absent Reason Extension
```json
{
  "resourceType": "Observation",
  "value[x]": {
    "extension": [{
      "url": "http://hl7.org/fhir/StructureDefinition/data-absent-reason",
      "valueCode": "unknown"
    }]
  }
}
```

#### Scenario 2: Null Values
```json
{
  "resourceType": "Patient",
  "name": [{
    "given": null
  }]
}
```

#### Scenario 3: Missing Optional Must Support Elements
```json
{
  "resourceType": "Patient",
  // Must Support elements intentionally omitted
}
```

### Required FHIR Operations
1. GET operations to retrieve resources with missing information
2. Search operations that should return resources with missing information

### Validation Criteria

#### Functional Validation
1. Consumer App successfully processes resources without errors
2. App correctly displays or handles:
   - Data absent reason extensions
   - Null values
   - Empty elements
   - Missing optional Must Support elements

#### Technical Validation
1. No error logs related to missing information processing
2. Appropriate display of missing information indicators in UI
3. Correct propagation of missing information in any downstream processing

### Test Steps
1. Configure test environment with sample resources
2. Send resources to Consumer App using supported operations
3. Verify app processing through UI inspection
4. Check error logs for unexpected behavior
5. Validate missing information display patterns
6. Document any inconsistencies or errors

### Pass/Fail Criteria
- **Pass**: Consumer App successfully processes all missing information patterns without errors
- **Fail**: Any of the following:
  - App crashes on missing information
  - Error logs show processing failures
  - Incorrect display of missing information
  - Rejection of valid missing information patterns

### Additional Notes
- Test cases should cover all Must Support elements identified in the Implementation Guide
- Consider edge cases where multiple missing information patterns exist in the same resource
- Document any specific missing information display requirements from the Implementation Guide
- Consider timing and performance impacts of missing information processing

---



<a id='general'></a>

## General

<a id='req-05'></a>

### REQ-05: Absent optional element handling

**Description**: "Health Plan API shall not include Must Support data elements in returned resources when information is absent and minimum cardinality is 0"

**Actor**: Health Plan API

**Conformance**: SHALL NOT

# Test Specification for REQ-05

## 1. Requirement ID
REQ-05: Absent Optional Element Handling

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically Testable
- **Rationale**: Can be verified through API responses inspection and validation against defined Must Support elements

### Complexity
- **Level**: Moderate
- **Rationale**: Requires:
  - Knowledge of Must Support elements for each resource type
  - Multiple test cases across different resources
  - Validation of element absence in responses

### Prerequisites
1. List of all Must Support elements with cardinality 0..x for each resource type
2. Test system with ability to create resources missing optional Must Support elements
3. Access to Health Plan API endpoints
4. Test data that intentionally excludes specific Must Support elements

## 3. Test Implementation Strategy

### Required Inputs
1. **Test Resources**:
   - Multiple FHIR resources with intentionally missing optional Must Support elements
   - Control resources with all Must Support elements present
   
2. **Test Data Matrix**:
   ```
   Resource Type | Must Support Element | Cardinality | Test Scenario
   -------------|---------------------|-------------|---------------
   Patient      | telecom            | 0..*        | Absent
   Coverage     | period             | 0..1        | Absent
   ```

### Required FHIR Operations
1. READ operations on resources with missing optional Must Support elements
2. SEARCH operations that would normally return these elements

### Validation Criteria

#### Positive Tests
1. Verify API responses do not include empty or null Must Support elements when:
   - Element is optional (min cardinality = 0)
   - Element is marked as Must Support
   - Data is not available

#### Negative Tests
1. Verify API includes Must Support elements when:
   - Data is available
   - Element has minimum cardinality > 0

### Test Steps
1. **Setup Phase**:
   ```
   - Create test resources missing specific Must Support elements
   - Store expected response structure
   ```

2. **Execution Phase**:
   ```
   - Perform READ operations on test resources
   - Perform SEARCH operations that would include test resources
   ```

3. **Validation Phase**:
   ```
   - Verify absence of empty/null Must Support elements
   - Validate response structure matches expected format
   - Confirm no default values are inserted
   ```

### Success Criteria
- No empty or null Must Support elements in responses when data is absent
- No default values inserted for absent Must Support elements
- Response structure maintains valid FHIR format
- Required elements (min cardinality > 0) still present

### Error Conditions
- Empty Must Support elements included in response
- Default values inserted for absent elements
- Invalid FHIR response structure

### Test Data Requirements
1. Minimum of 3 different resource types with:
   - At least one optional Must Support element absent
   - Control case with all elements present
   - Mix of single cardinality (0..1) and multiple cardinality (0..*)

### Special Considerations
- Test cases should cover both simple and complex Must Support elements
- Consider testing nested Must Support elements
- Document any system-specific handling of null vs. absent elements

---



<a id='general-requirements'></a>

## General Requirements

<a id='req-07'></a>

### REQ-07: Must Support processing

**Description**: "Applications shall process resource instances containing Must Support data elements without errors or failures"

**Actor**: Application

**Conformance**: SHALL

# Test Specification for REQ-07

## 1. Requirement ID
REQ-07: Must Support Processing Requirement

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically testable
- **Rationale**: Can be tested through systematic API interactions with resources containing Must Support elements

### Complexity
- **Level**: Complex
- **Rationale**: Requires testing multiple resources and data elements, with various combinations of Must Support elements present/absent

### Prerequisites
1. Test environment with FHIR server implementation
2. Documentation of all Must Support elements for each resource type
3. Test data sets containing:
   - Resources with all Must Support elements populated
   - Resources with minimum Must Support elements
   - Resources with mixed Must Support and optional elements

## 3. Test Implementation Strategy

### Required Inputs
1. **Test Resources**:
   - Sample resources for each supported resource type containing:
     - All Must Support elements populated with valid data
     - Minimum required Must Support elements
     - Edge cases (maximum length strings, boundary values)
2. **Expected Outputs**:
   - Successful processing confirmation
   - No error responses related to Must Support elements

### Required FHIR Operations
1. **READ Operations**:
   - GET [base]/[ResourceType]/[id] for each test resource
2. **SEARCH Operations**:
   - GET [base]/[ResourceType]?[parameters] including Must Support elements
3. **CREATE/UPDATE Operations**:
   - POST [base]/[ResourceType]
   - PUT [base]/[ResourceType]/[id]

### Validation Criteria

#### Test Case 1: Basic Must Support Processing
1. **Setup**:
   - Create resource instances with all Must Support elements
2. **Actions**:
   - Perform READ operation
   - Verify successful processing
3. **Assertions**:
   - HTTP 200 OK response
   - No processing errors
   - All Must Support elements correctly reflected in response

#### Test Case 2: Minimum Must Support Elements
1. **Setup**:
   - Create resource instances with minimum required Must Support elements
2. **Actions**:
   - Perform READ operation
   - Search using Must Support elements
3. **Assertions**:
   - HTTP 200 OK response
   - Successful search results
   - No processing errors

#### Test Case 3: Edge Cases
1. **Setup**:
   - Create resources with boundary values in Must Support elements
2. **Actions**:
   - Perform CREATE/UPDATE operations
   - Retrieve and verify data
3. **Assertions**:
   - Successful processing of boundary values
   - No truncation or alteration of Must Support data

### Error Conditions to Test
1. Missing required Must Support elements
2. Invalid data types in Must Support elements
3. Out-of-bounds values in Must Support elements

### Success Criteria
- All test cases execute without errors
- System successfully processes all variations of Must Support elements
- No unexpected behaviors or failures when handling Must Support data
- Search operations including Must Support elements return expected results

### Documentation Requirements
1. Test results for each test case
2. Any error conditions encountered
3. Evidence of successful processing of Must Support elements
4. Verification of data integrity through the processing chain

---



<a id='general/cross-resource'></a>

## General/Cross-Resource

<a id='req-09'></a>

### REQ-09: Missing data interpretation

**Description**: "Applications shall interpret missing Must Support data elements as data not present in Health Plan API system"

**Actor**: Application

**Conformance**: SHALL

# Test Specification for REQ-09

## 1. Requirement ID
REQ-09: Missing Must Support Data Element Interpretation

## 2. Requirement Analysis

### Testability Assessment
Semi-Automatically Testable - Requires both automated testing and manual verification of application behavior

### Complexity
Moderate - Involves testing multiple Must Support elements across different resource types and verifying application handling

### Prerequisites
- Test environment with Health Plan API implementation
- Test patient data with deliberately missing Must Support elements
- Test application with capability to display/process FHIR resources
- Documentation of all Must Support elements for relevant resources

## 3. Test Implementation Strategy

### Required Inputs
1. FHIR Resources:
   - At least 3 different resource types that contain Must Support elements
   - Each resource should have instances where Must Support elements are:
     a. Present with valid data
     b. Missing/null
     c. Empty arrays where applicable

### Required FHIR Operations
1. GET operations on relevant resources
2. Search operations that would typically return Must Support elements

### Validation Criteria

#### Test Cases

1. **Basic Missing Element Handling**
   - Input: Resource instance missing a Must Support element
   - Expected: Application should:
     - Not error/crash when processing the resource
     - Clearly indicate data is not present (not defaulting to empty values)
     - Not attempt to request the missing data through additional API calls

2. **Multiple Missing Elements**
   - Input: Resource instance with multiple Must Support elements missing
   - Expected: Application should:
     - Handle all missing elements consistently
     - Maintain functionality for present elements
     - Display/process available data correctly

3. **Empty vs Missing Distinction**
   - Input: Resources with:
     a. Missing Must Support elements (element not in payload)
     b. Empty Must Support elements (element present but empty)
   - Expected: Application should:
     - Distinguish between missing and empty elements
     - Handle both cases appropriately without errors

#### Acceptance Criteria
1. Application successfully processes resources with missing Must Support elements
2. No errors or crashes occur due to missing elements
3. Application provides clear indication that data is not present
4. Application maintains full functionality for present elements
5. Application doesn't make unnecessary API calls attempting to retrieve missing data
6. Consistent behavior across different resource types and Must Support elements

#### Test Documentation Requirements
1. List of tested Must Support elements
2. Screenshots or logs showing application behavior
3. Evidence of proper handling of missing elements
4. Documentation of any error handling mechanisms
5. Evidence of distinction between missing and empty elements

### Notes
- Test cases should cover a representative sample of Must Support elements
- Testing should include both primitive and complex data types
- Consider edge cases where missing data might impact application workflow
- Document any assumptions made about how missing data should be presented to users

This specification ensures comprehensive testing of the application's ability to handle missing Must Support elements appropriately while maintaining functionality and providing clear indication to users about the absence of data.

---



<a id='general/non-resource-specific'></a>

## General/Non-Resource-Specific

<a id='req-04'></a>

### REQ-04: Must Support data population

**Description**: "Health Plan API shall populate all Must Support data elements in query results"

**Actor**: Health Plan API

**Conformance**: SHALL

# Test Specification for REQ-04

## 1. Requirement ID
REQ-04: Must Support Data Population

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically Testable
- **Reasoning**: The presence of Must Support elements can be programmatically verified in API responses

### Complexity
- **Level**: Complex
- **Reasoning**: 
  - Requires testing across multiple resource types
  - Needs verification of all Must Support elements
  - Requires comprehensive test data coverage

### Prerequisites
- Complete list of Must Support elements from the IG for each relevant resource type
- Test system with populated data containing all Must Support elements
- Access to Health Plan API endpoints
- Valid authentication credentials
- Test patient data with sufficient variety to exercise all Must Support elements

## 3. Test Implementation Strategy

### Required Inputs
- List of all resource types with Must Support elements
- Sample patient identifiers for testing
- Expected Must Support elements for each resource type
- Test data covering all Must Support scenarios

### Required FHIR Operations
1. GET operations for each resource type containing Must Support elements
2. Search operations with various parameters to retrieve resources
3. READ operations for specific resource instances

### Validation Criteria

#### Primary Assertions
1. All Must Support elements marked as required SHALL be present in responses when data exists
2. When Must Support elements contain no data, appropriate null patterns SHALL be used:
   - Data Absent Reason extensions
   - Empty arrays where appropriate
   - Null values with proper coding

#### Test Steps
1. For each resource type with Must Support elements:
   - Execute applicable FHIR search operations
   - Verify presence of Must Support elements in responses
   - Document any missing Must Support elements
   - Verify proper null patterns for absent data

#### Success Criteria
- All Must Support elements are either:
  1. Populated with valid data
  2. Use appropriate null patterns when data is absent
- No Must Support elements are completely missing from responses

#### Test Data Requirements
1. Create test cases covering:
   - Resources with all Must Support elements populated
   - Resources with some Must Support elements intentionally empty
   - Edge cases for data types and cardinalities

### Additional Considerations
1. Test variations:
   - Different search parameters
   - Different patient contexts
   - Various data scenarios
2. Error handling:
   - Document behavior when Must Support elements cannot be populated
   - Verify error responses follow IG specifications

### Documentation Requirements
- List of tested Must Support elements
- Test results for each resource type
- Any identified gaps or issues
- Evidence of conformance or non-conformance

---



<a id='server'></a>

## Server

<a id='req-01'></a>

### REQ-01: Authentication prohibition

**Description**: "Server should not require authentication for Plan-Net service access and should not maintain records associating consumers with queried entities"

**Actor**: Server

**Conformance**: SHOULD NOT

# Test Specification for REQ-01

## 1. Requirement ID
REQ-01: Authentication Prohibition

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically Testable
- **Explanation**: This can be tested through direct API interactions to verify absence of authentication requirements and by analyzing server responses for authentication-related headers/challenges

### Complexity
- **Simple**
- **Rationale**: Involves straightforward API calls without complex setup or multiple steps

### Prerequisites
- Access to Plan-Net service endpoint
- No specific test data required
- Network access to server
- Tool capable of making HTTP requests and examining response headers (e.g., Postman, curl)

## 3. Test Implementation Strategy

### Required Inputs
- Plan-Net service base URL
- Sample FHIR resource queries (e.g., GET requests to commonly used endpoints)

### Required FHIR Operations
1. GET /metadata (Capability Statement)
2. GET [base]/Organization
3. GET [base]/Practitioner
4. GET [base]/PractitionerRole

### Test Cases

#### Test Case 1: Authentication Header Absence
**Objective**: Verify server accepts requests without authentication headers
1. Send GET requests to each endpoint without any authentication headers
2. Expected Result: 200 OK response

#### Test Case 2: Authentication Challenge Response
**Objective**: Verify server doesn't issue authentication challenges
1. Send GET requests to each endpoint
2. Expected Result: Response should not contain WWW-Authenticate header

#### Test Case 3: Session Tracking
**Objective**: Verify server doesn't maintain session information
1. Send multiple requests from same client
2. Expected Result: 
   - No Set-Cookie headers in responses
   - No session tokens returned
   - No session-related headers

### Validation Criteria

#### Pass Criteria
1. All requests succeed without authentication (HTTP 200)
2. No authentication-related headers in responses:
   - No WWW-Authenticate header
   - No Authorization header requirements
   - No Bearer token requirements
3. No session tracking mechanisms detected:
   - No Set-Cookie headers
   - No session tokens
   - No client tracking headers

#### Fail Criteria
1. Server returns 401 Unauthorized
2. Server returns 403 Forbidden
3. Server includes WWW-Authenticate header
4. Server requires any form of authentication token
5. Server implements session tracking

### Test Data Requirements
- No specific test data required beyond basic FHIR resource queries

### Tools and Environment
- HTTP client capable of:
  - Making FHIR REST calls
  - Examining response headers
  - Following redirects
  - Logging responses

### Notes
- Multiple requests should be made from different source IPs/clients to ensure no tracking
- Test should be conducted both with and without various common authentication headers to ensure server behavior remains consistent
- Document any security headers present in responses for analysis

---

<a id='req-02'></a>

### REQ-02: Consumer identification prohibition

**Description**: "Server shall not require directory mobile applications to send consumer identifying information in queries"

**Actor**: Server

**Conformance**: SHALL NOT

# Test Specification for REQ-02

## 1. Requirement ID
REQ-02: Server shall not require directory mobile applications to send consumer identifying information in queries

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically Testable
- **Rationale**: Can be tested through systematic API calls with and without consumer identifying information

### Complexity
- **Level**: Moderate
- **Rationale**: Requires multiple test cases to verify behavior across different scenarios and parameters

### Prerequisites
- Operational FHIR server implementing the directory API
- Test client capable of making FHIR API calls
- Set of non-consumer-identifying search parameters
- Set of consumer-identifying search parameters for testing

## 3. Test Implementation Strategy

### Required Inputs
- Valid search queries without consumer identifying information:
  - Location-based parameters (e.g., near, distance)
  - Service type parameters
  - Organization identifiers
  - Provider specialties
- Test queries with consumer identifying information:
  - Patient demographics
  - Patient identifiers
  - Personal health information

### Test Cases

#### Test Case 1: Basic Search Without Consumer Info
1. Execute basic search queries using non-consumer-identifying parameters
2. Verify successful response
3. Assert HTTP 200 status code

#### Test Case 2: Search With Consumer Info
1. Execute search queries including consumer-identifying parameters
2. Verify server responds successfully (should not reject based on missing consumer info)
3. Assert HTTP 200 status code

#### Test Case 3: Required Parameters Check
1. Analyze server's conformance statement
2. Verify no consumer-identifying parameters are marked as "required"
3. Attempt queries without any consumer-identifying parameters
4. Assert successful responses

### Validation Criteria

#### Pass Criteria
- Server successfully processes queries without consumer identifying information
- Server does not reject queries based on missing consumer identifying information
- No consumer-identifying parameters are marked as required in conformance resources
- HTTP 200 status codes received for valid queries without consumer information

#### Fail Criteria
- Server requires consumer identifying information in queries
- Server returns HTTP 400 or similar errors when consumer identifying information is missing
- Conformance resources indicate consumer-identifying parameters are required

### Additional Notes
- Test cases should be executed across all relevant FHIR endpoints
- Document any consumer-identifying parameters that are accepted but not required
- Include edge cases where parameters might indirectly identify consumers

---



<a id='universal'></a>

## Universal

<a id='req-08'></a>

### REQ-08: Data display capability

**Description**: "Applications should be capable of displaying data elements for human use or storing for other purposes"

**Actor**: Application

**Conformance**: SHOULD

# Test Specification for REQ-08

## 1. Requirement ID
REQ-08: Data display capability

## 2. Requirement Analysis

### Testability Assessment
Semi-automatically testable
- Requires both automated testing for data retrieval/storage and manual verification of display capabilities
- Human intervention needed to verify proper display formatting and usability

### Complexity
Moderate
- Multiple aspects to test (display and storage)
- Various data types and formats to consider
- User interface validation required

### Prerequisites
1. Test system with:
   - Functioning FHIR client application
   - User interface components
   - Data storage capability
   - Test dataset containing various FHIR resource types
2. Test data including:
   - Simple data elements (strings, numbers)
   - Complex data elements (CodeableConcepts, References)
   - Various resource types (Patient, Observation, etc.)
3. Access to application's storage system
4. Screen capture or recording capability

## 3. Test Implementation Strategy

### Required Inputs
1. Test FHIR Resources:
   - Patient resource with demographic data
   - Observation resource with vital signs
   - Condition resource with coding
   - DocumentReference with binary attachment

### Expected Outputs
1. Visual display:
   - Correctly formatted data elements
   - Human-readable labels
   - Appropriate units where applicable
2. Storage verification:
   - Stored data matches original FHIR resources
   - Data integrity maintained

### Test Scenarios

#### Scenario 1: Basic Data Display
1. Load test Patient resource
2. Verify demographic data displayed correctly
3. Check formatting of dates, names, and identifiers

#### Scenario 2: Complex Data Display
1. Load Observation with vital signs
2. Verify:
   - Numeric values with units
   - Reference ranges
   - Timestamps
   - Status indicators

#### Scenario 3: Storage Capability
1. Store test resources
2. Retrieve stored data
3. Compare with original resources

### Validation Criteria

#### Display Validation
1. Visual Checks:
   - All required data elements visible
   - Correct formatting applied
   - Units displayed appropriately
   - Dates in user-friendly format
   - Labels clear and accurate

#### Storage Validation
1. Data Integrity:
   - Complete data preservation
   - No loss of precision in numeric values
   - Maintained relationships between resources
   - Preserved metadata

### Test Steps
1. Launch application
2. Load test dataset
3. For each test scenario:
   - Execute display tests
   - Capture screenshots
   - Verify storage
   - Document results
4. Compare results against validation criteria
5. Generate test report

### Pass/Fail Criteria
Pass if:
1. All required data elements are displayed correctly
2. Storage functionality preserves data integrity
3. No critical formatting errors
4. All validation criteria met

Fail if:
1. Missing or incorrect data display
2. Storage failures
3. Critical formatting errors
4. Validation criteria not met

### Test Documentation Requirements
1. Screenshots of displayed data
2. Storage verification results
3. Test execution logs
4. Any identified issues or anomalies

---



