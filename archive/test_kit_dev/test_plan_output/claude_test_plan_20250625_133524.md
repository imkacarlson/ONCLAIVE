# Consolidated Test Plan for Plan Net

## Generated on: 2025-06-25 13:35:33

## API Type: claude

## Table of Contents

- [Organization](#organization)
  - [REQ-34: Organization search by name](#req-34)
- [OrganizationAffiliation](#organizationaffiliation)
  - [REQ-36: Organization search by specialty](#req-36)
- [Plan-Net Organization](#plan-net-organization)
  - [REQ-38: Network contact handling for departments](#req-38)
- [PractitionerRole](#practitionerrole)
  - [REQ-35: Provider search by specialty](#req-35)
  - [REQ-37: Search for active practitioners and organizations](#req-37)

## Test Specifications

<a id='organization'></a>

## Organization

<a id='req-34'></a>

### REQ-34: Organization search by name

**Description**: "The Plan-Net design is based around the following types of searches: Organization by Name - Example: Montgomery Cardiology or CVS - Focal Resource and Field: Organization.name - Qualifications of Search: Location, network, specialty."

**Actor**: Health Plan API

**Conformance**: None (Design requirement)

# Test Specification for REQ-34: Organization Search by Name

## 1. Requirement ID
REQ-34: Organization search by name capability

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically testable
- **Complexity**: Moderate
- **Rationale**: The requirement involves testing search functionality using the `name` parameter which is explicitly supported in the Capability Statement. The complexity is moderate due to the need to test multiple search scenarios and combinations with other parameters.

### Prerequisites
1. Access to the Health Plan API endpoint
2. API authentication/authorization credentials if required
3. Health Plan API must contain at least 3-5 Organization resources with different names
4. Test data should include Organizations with:
   - Different types of names (full names, abbreviated names)
   - Associated Locations
   - Associated Networks
   - Associated Healthcare specialties

## 3. Test Implementation Strategy

### Required Resources
- Organization resources in the system under test
- Associated Location resources (for testing combined searches)

### Required FHIR Operations
1. GET [base]/Organization?name=[string]
2. GET [base]/Organization?name=[string]&_include=Organization:location
3. GET [base]/Organization?name=[string]&type=[code]

### Test Cases

#### 1. Basic Name Search
**Objective**: Verify basic Organization search by name functionality
- Execute search with exact name
- Execute search with partial name
- Execute search with case-insensitive name
**Validation**:
- Search returns HTTP 200 OK
- Bundle contains matching Organization resources
- Returned resources contain the searched name string (case-insensitive)

#### 2. Combined Parameter Search
**Objective**: Verify name search works with additional search parameters
- Execute search combining name with location
- Execute search combining name with network
- Execute search combining name with specialty (type)
**Validation**:
- Search returns HTTP 200 OK
- Bundle contains only resources matching all search criteria
- Verify proper handling of no matches

#### 3. Special Character Handling
**Objective**: Verify proper handling of special characters in name searches
- Execute search with names containing spaces
- Execute search with names containing special characters (e.g., apostrophes, hyphens)
**Validation**:
- Search returns HTTP 200 OK
- Special characters are properly handled in the search

### Validation Criteria

#### Success Criteria
1. All search operations return HTTP 200 OK
2. Returned bundles contain valid FHIR Organization resources
3. All returned resources match the search criteria
4. Search is case-insensitive
5. Partial name matches are supported
6. Combined parameter searches function correctly

#### Error Conditions
1. Invalid parameter combinations return appropriate error codes
2. Empty result sets return valid empty bundles
3. Malformed requests return appropriate 4xx errors

### Test Data Requirements
- Test data should include:
  - Organizations with single-word names
  - Organizations with multi-word names
  - Organizations with special characters in names
  - Organizations with various types/specialties
  - Organizations with associated locations and networks

Note: Specific test data values are not provided as this specification follows a "bring your own data" approach. Testers should substitute appropriate values from their own data sets while maintaining the testing principles outlined above.

---



<a id='organizationaffiliation'></a>

## OrganizationAffiliation

<a id='req-36'></a>

### REQ-36: Organization search by specialty

**Description**: "The Plan-Net design is based around the following types of searches: Organization by specialty - Example: Compounding Pharmacy - Focal Resource and Field: OrganizationAffiliation.specialty - Qualifications of Search: Location, network, name."

**Actor**: Health Plan API

**Conformance**: None (Design requirement)

# Test Specification for REQ-36: Organization Search by Specialty

## 1. Requirement ID
REQ-36: Organization search by specialty

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically testable
- **Complexity**: Moderate
- **Rationale**: The requirement can be tested through API interactions using supported search parameters from the Capability Statement. The complexity is moderate due to the need to coordinate multiple search parameters and resources.

### Prerequisites
1. Access to the Plan-Net API endpoint
2. System must have OrganizationAffiliation resources with:
   - Valid specialty codes
   - Associated Organization resources
   - Associated Location resources
   - Network affiliations
3. Authorization credentials if required

## 3. Test Implementation Strategy

### Required Resources
- OrganizationAffiliation resources containing specialty codes
- Referenced Organization resources
- Referenced Location resources
- Referenced Network resources

### Test Scenarios

#### Scenario 1: Basic Specialty Search
**Purpose**: Verify that organizations can be found by specialty through OrganizationAffiliation
```
Operation: GET [base]/OrganizationAffiliation?specialty=[system]|[code]
Expected Result: Bundle of OrganizationAffiliation resources matching the specialty
```

#### Scenario 2: Specialty Search with Location
**Purpose**: Verify specialty search with location filtering
```
Operation: GET [base]/OrganizationAffiliation?specialty=[system]|[code]&location=[location-reference]
Expected Result: Bundle of OrganizationAffiliation resources filtered by both specialty and location
```

#### Scenario 3: Specialty Search with Network
**Purpose**: Verify specialty search within a specific network
```
Operation: GET [base]/OrganizationAffiliation?specialty=[system]|[code]&network=[network-reference]
Expected Result: Bundle of OrganizationAffiliation resources filtered by both specialty and network
```

#### Scenario 4: Combined Search with Organization Name
**Purpose**: Verify specialty search with organization name filtering
```
Operation: GET [base]/OrganizationAffiliation?specialty=[system]|[code]&primary-organization.name=[name]
Expected Result: Bundle of OrganizationAffiliation resources filtered by specialty and organization name
```

### Validation Criteria

For each scenario, verify:

1. **Response Format**
   - HTTP 200 OK status
   - Valid FHIR Bundle returned
   - Bundle type is "searchset"

2. **Content Validation**
   - Each returned OrganizationAffiliation resource must:
     - Contain the searched specialty code
     - Reference valid Organization resources
     - Include all mandatory elements
   - When additional search parameters are used:
     - Location references must match when location filter is applied
     - Network references must match when network filter is applied
     - Organization names must match when name filter is applied

3. **Search Parameter Support**
   - Verify that all search parameters used are supported according to the Capability Statement
   - Verify proper handling of invalid search parameters

### Implementation Notes

1. Use actual codes from a standard terminology system for specialty codes (e.g., NUCC provider taxonomy codes)
2. Tests should be data-agnostic and work with any valid test data
3. Include error case testing:
   - Invalid specialty codes
   - Non-existent location references
   - Non-existent network references

### Conformance Requirements

1. Server MUST support the specialty search parameter on OrganizationAffiliation
2. Server MUST support chaining and combining of search parameters as specified
3. Server MUST return appropriate error responses for invalid searches
4. All referenced resources must be retrievable via their URLs

### Test Data Requirements

Testers should ensure their test data includes:
1. Multiple organizations with different specialties
2. Organizations with multiple specialties
3. Organizations in different locations and networks
4. At least one example of a compounding pharmacy (as mentioned in the requirement example)

Note: The test plan assumes the existence of test data but does not specify exact test data, allowing for a "bring your own data" approach while maintaining test validity.

---



<a id='plan-net-organization'></a>

## Plan-Net Organization

<a id='req-38'></a>

### REQ-38: Network contact handling for departments

**Description**: "When the contact is a department name, rather than a human (e.g., patient help line), include a blank family and given name, and provide the department name in contact.name.text."

**Actor**: Health Plan API

**Conformance**: None (Implementation guidance)

# Test Specification for REQ-38

## 1. Requirement ID
REQ-38: Network contact handling for departments

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically testable
- **Rationale**: The requirement specifies clear structural expectations for how department contacts should be represented in FHIR resources containing contact information.

### Complexity
- **Level**: Simple
- **Rationale**: The requirement involves checking straightforward structural elements within contact fields.

### Prerequisites
- Access to the Health Plan API
- Test data containing department-based contacts (e.g., help lines, administrative offices)
- FHIR resources that include contact elements (e.g., Organization, PractitionerRole)

## 3. Test Implementation Strategy

### Required Inputs
- FHIR resources containing department-based contacts
- Expected data structure:
```json
{
  "contact": {
    "name": {
      "family": "",
      "given": [],
      "text": "Department Name"
    }
  }
}
```

### Test Cases

#### Test Case 1: Department Contact Structural Validation
**Purpose**: Verify that department contacts are structured correctly with blank name components and department name in text.

**Steps**:
1. Query relevant resources containing department contacts
2. For each contact identified as a department:
   - Verify name.family is empty string or null
   - Verify name.given array is empty or null
   - Verify name.text contains non-empty department name

**Validation Criteria**:
- name.family must be empty string or null
- name.given must be empty array or null
- name.text must contain non-empty string value
- name.text should contain recognizable department name pattern (e.g., "Customer Service", "Claims Department")

#### Test Case 2: Mixed Contact Type Handling
**Purpose**: Verify correct handling when resource contains both department and individual contacts.

**Steps**:
1. Query resources containing mixed contact types
2. Identify department contacts vs individual contacts
3. Verify department contacts follow specified structure
4. Verify individual contacts maintain normal name components

**Validation Criteria**:
- Department contacts follow structure from Test Case 1
- Individual contacts contain proper name components
- Clear differentiation between department and individual contact structures

### Implementation Notes
1. Test cases should be data-agnostic and work with any valid FHIR resources containing contacts
2. Implementation should account for various FHIR resources that might contain contacts
3. Tests should be non-destructive and read-only
4. Consider cultural variations in department naming conventions

### Error Conditions to Test
1. Department contacts with populated name components
2. Missing text element in department contacts
3. Invalid or unexpected contact structures

### Conformance Testing Approach
- This is implementation guidance rather than a strict conformance requirement
- Testing should focus on validating the recommended structure when department contacts are present
- Non-conformance should generate warnings rather than errors
- Document any deviations from the recommended structure for review

---



<a id='practitionerrole'></a>

## PractitionerRole

<a id='req-35'></a>

### REQ-35: Provider search by specialty

**Description**: "The Plan-Net design is based around the following types of searches: Provider by Specialty - Example: Cardiologist - Focal Resource and Field: PractitionerRole.specialty - Qualifications of Search: Location, network, name."

**Actor**: Health Plan API

**Conformance**: None (Design requirement)

# Test Specification for REQ-35: Provider Search by Specialty

## 1. Requirement ID
REQ-35: Provider search by specialty

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically testable
- **Complexity**: Moderate
- **Rationale**: The requirement can be tested through API calls using supported search parameters in the Capability Statement, specifically PractitionerRole.specialty along with other qualifying parameters.

### Prerequisites
1. Access to the Health Plan API endpoint
2. API authentication/authorization credentials
3. System must have PractitionerRole resources with populated specialty codes
4. Associated Location and Network resources must exist in the system

## 3. Test Implementation Strategy

### Required Resources
- PractitionerRole resources with specialty codes
- Associated Location resources
- Associated Network resources

### Test Scenarios

#### Basic Specialty Search
1. **Test Case**: Search for providers by single specialty
   - **Operation**: `GET [base]/PractitionerRole?specialty=[system]|[code]`
   - **Validation**:
     - Response status 200 OK
     - Bundle contains only PractitionerRole resources
     - Each returned resource contains the searched specialty code
     - Bundle.total reflects accurate count

#### Qualified Specialty Search
2. **Test Case**: Search for providers by specialty and location
   - **Operation**: `GET [base]/PractitionerRole?specialty=[system]|[code]&location=[location-reference]`
   - **Validation**:
     - Response status 200 OK
     - Bundle contains only PractitionerRole resources
     - Each resource contains both the specialty code and specified location
     - Location references are valid

3. **Test Case**: Search for providers by specialty and network
   - **Operation**: `GET [base]/PractitionerRole?specialty=[system]|[code]&network=[network-reference]`
   - **Validation**:
     - Response status 200 OK
     - Bundle contains only PractitionerRole resources
     - Each resource contains both the specialty code and specified network
     - Network references are valid

### Validation Criteria

For all test cases, verify:
1. **Response Format**:
   - Valid FHIR Bundle of type searchset
   - Correct resource types returned
   - Valid FHIR JSON syntax

2. **Search Parameter Support**:
   - Server processes specialty parameter correctly
   - Server handles additional qualifying parameters correctly
   - Server returns appropriate error responses for invalid parameters

3. **Resource Completeness**:
   - Returned PractitionerRole resources contain required elements
   - Referenced resources (Location, Network) are accessible

### Error Conditions to Test
1. Invalid specialty code
   - Expected: 400 Bad Request or empty search result
2. Non-existent location reference
   - Expected: Empty search result
3. Invalid search parameter combination
   - Expected: 400 Bad Request with OperationOutcome

### Notes for Implementers
- Use valid specialty codes from a standard terminology (e.g., NUCC or SNOMED CT)
- Test with both exact and unknown specialty codes to verify search behavior
- Verify that the server implements proper paging if large result sets are returned
- The test cases should be executed with the tester's own valid data that matches the criteria

The test plan intentionally avoids specifying exact specialty codes or resource IDs to maintain a "bring your own data" approach while ensuring interoperability conformance.

---

<a id='req-37'></a>

### REQ-37: Search for active practitioners and organizations

**Description**: "Sample query to search for currently active Practitioners (replace date in query with current date): http://davinci-plan-net-ri.logicahealth.org/fhir/PractitionerRole?_include=PractitionerRole:date=ge2021-10-25. Sample query to search for currently active Organizations (replace date in query with current date): http://davinci-plan-net-ri.logicahealth.org/fhir/OrganizationAffiliation?_include=OrganizationAffiliation:date=ge2021-10-25."

**Actor**: Health Plan API

**Conformance**: None (Implementation example)

# Test Specification for REQ-37

## 1. Requirement ID
REQ-37: Search for active practitioners and organizations

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically testable
- **Complexity**: Moderate
- **Implementation Type**: Functional API testing

### Prerequisites
- Access to FHIR server endpoint
- Server implements PractitionerRole and OrganizationAffiliation resources
- Test data including active and inactive practitioners and organizations
- Current date available for comparison

## 3. Test Implementation Strategy

### Test Scenarios

#### Scenario 1: PractitionerRole Active Status Search
1. **Purpose**: Verify ability to search for currently active practitioners
2. **Operations**:
   - GET [base]/PractitionerRole?active=true
   - GET [base]/PractitionerRole?period:contains=currentDate
   - GET [base]/PractitionerRole?_include=PractitionerRole:practitioner
   
#### Scenario 2: OrganizationAffiliation Active Status Search
1. **Purpose**: Verify ability to search for currently active organizations
2. **Operations**:
   - GET [base]/OrganizationAffiliation?active=true
   - GET [base]/OrganizationAffiliation?period:contains=currentDate
   - GET [base]/OrganizationAffiliation?_include=OrganizationAffiliation:organization

### Required Inputs
- Base URL of FHIR server
- Current date in YYYY-MM-DD format
- Valid authentication credentials if required

### Validation Criteria

#### For Each Scenario
1. **HTTP Response Validation**:
   - Status code 200 OK for successful searches
   - Valid FHIR Bundle returned
   - Correct resource types included in response

2. **Content Validation**:
   - All returned PractitionerRole/OrganizationAffiliation resources must have:
     - active=true (if present)
     - period.end is null OR period.end is greater than current date
     - period.start is less than or equal to current date (if present)
   
3. **_include Validation**:
   - When _include is specified, bundle contains both primary and included resources
   - Referenced resources are present in the bundle

4. **Search Parameter Validation**:
   - Server supports date-based searching
   - Server properly handles _include parameters
   - Search results are consistent across multiple query variations

### Error Conditions to Test
1. Invalid date format
2. Future dates
3. Missing required parameters
4. Invalid _include parameters

### Test Data Requirements
- No specific test data is required (bring your own data approach)
- Test system must contain:
  - Mix of active and inactive practitioners/organizations
  - Resources with various period start/end dates
  - Valid references between resources

### Passing Criteria
1. All HTTP responses are valid
2. All returned resources meet the active status criteria
3. _include parameters function as specified
4. Error conditions are handled appropriately
5. Search results are consistent and reproducible

## Notes
- Tests should be executed with current date at time of testing
- Implementation should handle timezone differences appropriately
- Tests should be idempotent and not depend on specific resource IDs
- Capability Statement confirms support for required search parameters

---



