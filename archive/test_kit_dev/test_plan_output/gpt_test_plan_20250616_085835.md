# Consolidated Test Plan for Plan Net

## Generated on: 2025-06-16 08:58:42

## API Type: gpt

## Table of Contents

- [Plan-Net Organization](#plan-net-organization)
  - [REQ-34: Organization search by name](#req-34)
  - [REQ-38: Network contact handling for departments](#req-38)
- [Plan-Net OrganizationAffiliation](#plan-net-organizationaffiliation)
  - [REQ-36: Organization search by specialty](#req-36)
- [Plan-Net PractitionerRole](#plan-net-practitionerrole)
  - [REQ-35: Provider search by specialty](#req-35)
  - [REQ-37: Search for active practitioners and organizations](#req-37)

## Test Specifications

<a id='plan-net-organization'></a>

## Plan-Net Organization

<a id='req-34'></a>

### REQ-34: Organization search by name

**Description**: "The Plan-Net design is based around the following types of searches: Organization by Name - Example: Montgomery Cardiology or CVS - Focal Resource and Field: Organization.name - Qualifications of Search: Location, network, specialty."

**Actor**: Health Plan API

**Conformance**: None (Design requirement)

# Test Specification for REQ-34: Organization Search by Name

## 1. Requirement ID
**REQ-34**

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically testable
- **Rationale**: The requirement specifies a search operation that can be executed programmatically using the FHIR API, making it suitable for automated testing.

### Complexity
- **Complexity Level**: Simple
- **Rationale**: The operation involves a straightforward search query using a single search parameter (`name`) on the Organization resource.

### Prerequisites
- **System Configurations**: 
  - The Health Plan API must be accessible and configured to support FHIR R4.
  - The API must be capable of handling search operations on the Organization resource.
- **Data Setup**: 
  - The FHIR server must contain Organization resources with diverse `name` values, including examples like "Montgomery Cardiology" and "CVS".
  - Ensure that the Organization resources have associated Location, network, and specialty data to validate the qualifications of the search.

## 3. Test Implementation Strategy

### Required Inputs
- **FHIR Resources**: 
  - Organization resources with varying `name` attributes.
  - Associated Location, network, and specialty data for the Organizations.
- **Search Query**: 
  - `GET [base]/Organization?name=Montgomery Cardiology`
  - `GET [base]/Organization?name=CVS`

### Required FHIR Operations
- **API Calls**:
  - Perform a search operation on the Organization resource using the `name` search parameter.
  - Ensure the API supports the `name` search parameter as per the Capability Statement.

### Validation Criteria
- **Assertions**:
  - The response should return a Bundle of Organization resources where the `name` matches the search query.
  - Verify that the returned Organizations have associated Location, network, and specialty data as expected.
  - Ensure the response conforms to the FHIR R4 standard, including proper use of HTTP status codes (e.g., 200 OK for successful searches).
  - Validate that the search operation respects case-insensitivity and partial matches as per FHIR search specifications.
- **Expected Results**:
  - For the search query `name=Montgomery Cardiology`, the response should include at least one Organization resource with the `name` "Montgomery Cardiology".
  - For the search query `name=CVS`, the response should include at least one Organization resource with the `name` "CVS".
- **Error Handling**:
  - If no matching results are found, the response should include an empty Bundle with a 200 OK status.
  - Verify that invalid search queries return appropriate error messages and status codes (e.g., 400 Bad Request for malformed queries).

---

<a id='req-38'></a>

### REQ-38: Network contact handling for departments

**Description**: "When the contact is a department name, rather than a human (e.g., patient help line), include a blank family and given name, and provide the department name in contact.name.text."

**Actor**: Health Plan API

**Conformance**: None (Implementation guidance)

```markdown
# Test Specification for Requirement REQ-38

## 1. Requirement ID
- **REQ-38**

## 2. Requirement Analysis

### Testability Assessment
- **Classify**: Automatically testable
- **Rationale**: The requirement specifies clear conditions that can be programmatically verified by inspecting the structure of the FHIR resource.

### Complexity
- **Complexity Level**: Simple
- **Rationale**: The requirement involves checking the presence and structure of specific fields within a FHIR resource, which is straightforward.

### Prerequisites
- **System Configurations**: 
  - The Health Plan API must be implemented and accessible.
  - The API must support the necessary FHIR operations as per the Capability Statement.
- **Data Setup**:
  - A FHIR resource representing a contact with a department name must be available in the system.

## 3. Test Implementation Strategy

### Required Inputs
- **FHIR Resources**: 
  - A `ContactPoint` or similar resource where the contact is a department name.
- **Expected Outputs**:
  - The `contact.name.text` field should contain the department name.
  - The `contact.name.family` and `contact.name.given` fields should be blank.

### Required FHIR Operations
- **API Calls/Operations**:
  - `GET [base]/ContactPoint/{id}`: Retrieve the contact resource by ID to inspect its fields.
  - Ensure that the Health Plan API supports the `GET` operation for the relevant resource type as per the Capability Statement.

### Validation Criteria
- **Checks**:
  1. Retrieve the contact resource using the specified FHIR operation.
  2. Verify that the `contact.name.text` field is populated with the department name.
  3. Confirm that the `contact.name.family` and `contact.name.given` fields are empty.
- **Assertions**:
  - Assert that `contact.name.text` is not null or empty and matches the expected department name.
  - Assert that `contact.name.family` is null or an empty string.
  - Assert that `contact.name.given` is null or an empty string.

### Passing Criteria
- The test passes if all validation criteria are met, indicating that the resource conforms to the requirement as specified in REQ-38.
```


---



<a id='plan-net-organizationaffiliation'></a>

## Plan-Net OrganizationAffiliation

<a id='req-36'></a>

### REQ-36: Organization search by specialty

**Description**: "The Plan-Net design is based around the following types of searches: Organization by specialty - Example: Compounding Pharmacy - Focal Resource and Field: OrganizationAffiliation.specialty - Qualifications of Search: Location, network, name."

**Actor**: Health Plan API

**Conformance**: None (Design requirement)

# Test Specification for REQ-36: Organization Search by Specialty

## 1. Requirement ID
- **REQ-36**

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically Testable
- **Rationale**: The requirement specifies a search functionality that can be tested using automated queries against the FHIR API.

### Complexity
- **Level**: Moderate
- **Rationale**: The requirement involves multiple search parameters and requires validation of the search results against expected criteria.

### Prerequisites
- **System Configurations**: 
  - The Health Plan API must be operational and accessible.
  - The API must support the necessary search parameters as per the Capability Statement.
- **Data Setup**:
  - Test data must include OrganizationAffiliation resources with various specialties, including "Compounding Pharmacy".
  - Organizations and Locations related to these affiliations should be set up with relevant details such as name, network, and location.

## 3. Test Implementation Strategy

### Required Inputs
- **FHIR Resources**:
  - `OrganizationAffiliation` with `specialty` field populated.
  - Related `Organization` resources with relevant `name` and `network` fields.
  - `Location` resources linked to the `OrganizationAffiliation`.
- **Expected Outputs**:
  - A list of `Organization` resources that match the search criteria for the specified specialty.

### Required FHIR Operations
- **Search Operation**: 
  - Perform a search on `OrganizationAffiliation` using the `specialty` search parameter.
  - Example API Call: `GET [base]/OrganizationAffiliation?specialty=CompoundingPharmacy`
- **Additional Parameters**:
  - Optionally include `location`, `network`, and `name` parameters to refine search results.

### Validation Criteria
- **Assertions**:
  - The search results should include only those `Organization` resources that have an `OrganizationAffiliation` with the specified specialty.
  - Verify that each returned `Organization` has the correct `OrganizationAffiliation.specialty` value of "Compounding Pharmacy".
  - If additional parameters are used (e.g., `location`, `network`, `name`), ensure that the results conform to these filters.
- **Result Verification**:
  - Confirm that the search operation returns HTTP status code 200.
  - Validate that the response contains a FHIR Bundle with `Organization` entries.
  - Check that the number of returned results matches the expected count based on the test data setup.

By following this structured test specification, the requirement for searching organizations by specialty can be effectively validated to ensure conformance with the FHIR Implementation Guide.

---



<a id='plan-net-practitionerrole'></a>

## Plan-Net PractitionerRole

<a id='req-35'></a>

### REQ-35: Provider search by specialty

**Description**: "The Plan-Net design is based around the following types of searches: Provider by Specialty - Example: Cardiologist - Focal Resource and Field: PractitionerRole.specialty - Qualifications of Search: Location, network, name."

**Actor**: Health Plan API

**Conformance**: None (Design requirement)

# Test Specification for REQ-35: Provider Search by Specialty

## 1. Requirement ID
- **REQ-35**

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically Testable
- **Rationale**: The requirement specifies a clear search operation using the `PractitionerRole.specialty` field, which can be tested using automated scripts to verify the search functionality.

### Complexity
- **Level**: Moderate
- **Rationale**: The test involves multiple parameters (specialty, location, network, name) and requires validation across different resource types (PractitionerRole, Location).

### Prerequisites
- **System Configurations**: 
  - The Health Plan API must be accessible and properly configured to handle FHIR search operations.
- **Data Setup**:
  - A set of PractitionerRole resources with varying specialties, locations, and network affiliations.
  - Location resources with relevant address details.
  - Practitioner resources with names that can be searched.
- **Setup**:
  - Ensure the FHIR server is populated with test data that includes practitioners with specialties such as "Cardiologist".

## 3. Test Implementation Strategy

### Required Inputs
- **FHIR Resources**:
  - `PractitionerRole` resources with `specialty` field populated.
  - `Location` resources with address details.
  - `Practitioner` resources with `name` fields populated.
- **Expected Outputs**:
  - A list of PractitionerRole resources that match the search criteria for specialty, location, network, and name.

### Required FHIR Operations
- **Search Operation**:
  - `GET [base]/PractitionerRole?specialty=[specialty-code]&location=[location-id]&network=[network-id]&practitioner.name=[name]`
  - Ensure that the search operation is supported as per the Capability Statement.

### Validation Criteria
- **Conformance Checks**:
  - Verify that the search results include only those PractitionerRole resources where the `specialty` matches the specified code (e.g., Cardiologist).
  - Validate that the returned resources are associated with the specified `location` and `network`.
  - Confirm that the practitioner's name matches the search criteria.
- **Assertions**:
  - The response should return a 200 HTTP status code.
  - The response should include a `Bundle` of type `searchset`.
  - Each entry in the Bundle should be a PractitionerRole resource with the specified specialty.
- **Edge Cases**:
  - Test with no matching specialties to ensure the system returns an empty search set.
  - Test with multiple specialties to ensure the system can handle compound searches.
  - Validate the behavior when invalid or non-existent specialty codes are used.

By following this structured test specification, the implementation of the provider search by specialty can be thoroughly validated to ensure it meets the requirements outlined in REQ-35.

---

<a id='req-37'></a>

### REQ-37: Search for active practitioners and organizations

**Description**: "Sample query to search for currently active Practitioners (replace date in query with current date): http://davinci-plan-net-ri.logicahealth.org/fhir/PractitionerRole?_include=PractitionerRole:date=ge2021-10-25. Sample query to search for currently active Organizations (replace date in query with current date): http://davinci-plan-net-ri.logicahealth.org/fhir/OrganizationAffiliation?_include=OrganizationAffiliation:date=ge2021-10-25."

**Actor**: Health Plan API

**Conformance**: None (Implementation example)

```markdown
# Test Specification for Requirement REQ-37

## 1. Requirement ID
- **REQ-37**

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically Testable
- **Rationale**: The requirement involves executing specific FHIR search queries to retrieve active Practitioners and Organizations, which can be automated using test scripts.

### Complexity
- **Level**: Moderate
- **Rationale**: The test involves multiple FHIR resources and search parameters, requiring careful setup and validation of expected outputs.

### Prerequisites
- **System Configurations**: 
  - Access to the Health Plan API endpoint: `http://davinci-plan-net-ri.logicahealth.org/fhir/`
  - Authentication credentials if required by the API
- **Data Setup**: 
  - Ensure there are PractitionerRole and OrganizationAffiliation resources with valid `date` fields in the system.
  - Populate test data with known active Practitioners and Organizations for the current date.

## 3. Test Implementation Strategy

### Required Inputs
- **FHIR Resources**:
  - `PractitionerRole`
  - `OrganizationAffiliation`
- **Expected Outputs**:
  - A list of active Practitioners and Organizations with valid `date` fields greater than or equal to the current date.

### Required FHIR Operations
- **API Calls**:
  - `GET /PractitionerRole?_include=PractitionerRole:date=ge<current-date>`
  - `GET /OrganizationAffiliation?_include=OrganizationAffiliation:date=ge<current-date>`

### Validation Criteria
- **Conformance Checks**:
  - Verify that the API returns a HTTP 200 status code for both queries.
  - Ensure the response includes only PractitionerRole and OrganizationAffiliation resources with `date` fields greater than or equal to the current date.
  - Validate that all returned resources conform to the required FHIR structure and include necessary fields such as `PractitionerRole.practitioner`, `PractitionerRole.organization`, `OrganizationAffiliation.primary-organization`, and `OrganizationAffiliation.participating-organization`.
  - Confirm that the search parameters used in the queries are supported as per the Capability Statement.

- **Assertions**:
  - Assert that the number of returned resources matches the expected count based on the test data.
  - Assert that no resources with `date` fields less than the current date are included in the response.
  - Validate that the search results are consistent with the data setup and expected outputs.

By following this test specification, the requirement REQ-37 can be effectively validated to ensure that the system correctly supports searching for active Practitioners and Organizations as per the FHIR Implementation Guide.
```

---



