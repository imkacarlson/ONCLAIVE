# Consolidated Test Plan for Plan Net

## Generated on: 2025-06-25 13:41:38

## API Type: gpt

## Table of Contents

- [Plan-Net Organization](#plan-net-organization)
  - [REQ-34: Organization search by name](#req-34)
  - [REQ-38: Network contact handling for departments](#req-38)
- [Plan-Net OrganizationAffiliation](#plan-net-organizationaffiliation)
  - [REQ-36: Organization search by specialty](#req-36)
- [Plan-Net PractitionerRole](#plan-net-practitionerrole)
  - [REQ-35: Provider search by specialty](#req-35)
  - [REQ-37: Search for active practitioners and organizations](#req-37)

## Test Specifications

<a id='plan-net-organization'></a>

## Plan-Net Organization

<a id='req-34'></a>

### REQ-34: Organization search by name

**Description**: "The Plan-Net design is based around the following types of searches: Organization by Name - Example: Montgomery Cardiology or CVS - Focal Resource and Field: Organization.name - Qualifications of Search: Location, network, specialty."

**Actor**: Health Plan API

**Conformance**: None (Design requirement)

# Test Specification for FHIR Implementation Guide Requirement

## 1. Requirement ID
**REQ-34**: Organization search by name

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically testable
- **Rationale**: The requirement specifies a clear operation (search by name) that can be tested using FHIR search parameters.

### Complexity
- **Level**: Simple
- **Rationale**: The requirement involves straightforward search functionality using a single search parameter (`Organization.name`).

### Prerequisites
- **System Configurations**: 
  - The Health Plan API must be accessible and operational.
  - The FHIR server must support the Organization resource and the required search parameters.
- **Data Setup**:
  - The FHIR server must contain Organization resources with diverse `name` values to allow meaningful search results.
  - Ensure there are Organizations with names like "Montgomery Cardiology" and "CVS" for validation.

## 3. Test Implementation Strategy

### Required Inputs
- **FHIR Resource**: `Organization`
- **Search Parameter**: `name` (string)
- **Example Search Values**: "Montgomery Cardiology", "CVS"
- **Expected Outputs**: 
  - A list of Organization resources where the `name` field matches the search value.

### Required FHIR Operations
- **Search Operation**: 
  - HTTP GET request to the `/Organization` endpoint with the `name` search parameter.
  - Example API Call: `GET /Organization?name=Montgomery Cardiology`
  - Example API Call: `GET /Organization?name=CVS`

### Validation Criteria
- **Response Code**: 
  - The server must return a 200 HTTP status code indicating a successful operation.
- **Response Content**:
  - The response should contain a Bundle of Organization resources.
  - Each Organization in the Bundle should have a `name` field that matches the search term.
- **Assertions**:
  - Assert that the returned Bundle is not empty when valid search terms are used.
  - Assert that each Organization resource in the response contains the `name` field with a value that includes the search term.
- **Conformance Check**:
  - Verify that the search operation adheres to the FHIR specification for search parameters, including case sensitivity and partial matching as applicable.

This test specification ensures that the Health Plan API correctly implements the search functionality for Organization resources by name, as required by the FHIR Implementation Guide. The focus is on verifying interoperability and conformance to the FHIR standard.

---

<a id='req-38'></a>

### REQ-38: Network contact handling for departments

**Description**: "When the contact is a department name, rather than a human (e.g., patient help line), include a blank family and given name, and provide the department name in contact.name.text."

**Actor**: Health Plan API

**Conformance**: None (Implementation guidance)

```markdown
# Test Specification for REQ-38: Network Contact Handling for Departments

## 1. Requirement ID
- **REQ-38**

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically Testable
- **Rationale**: The requirement specifies clear conditions for the structure of the `Contact` resource when representing a department, which can be programmatically verified.

### Complexity
- **Level**: Simple
- **Rationale**: The requirement involves checking the presence and structure of specific fields within a FHIR resource, which is straightforward.

### Prerequisites
- **System Configurations**: The Health Plan API must be accessible and configured to respond to FHIR queries.
- **Data**: The system must contain `Contact` resources that represent department contacts.
- **Setup**: Ensure that the API endpoints for accessing `Contact` resources are operational and authenticated.

## 3. Test Implementation Strategy

### Required Inputs
- **FHIR Resources**: `Contact` resources where the contact is a department.
- **Expected Outputs**: 
  - `contact.name.text` should contain the department name.
  - `contact.name.family` and `contact.name.given` should be blank.

### Required FHIR Operations
- **API Calls**: 
  - `GET [base]/Contact` to retrieve contact resources.
  - Ensure the API supports search parameters to filter contacts by type (e.g., department).

### Validation Criteria
- **Check 1**: For each `Contact` resource retrieved, verify if `contact.name.text` is populated with a department name.
  - **Assertion**: `contact.name.text` is not empty and contains a string representing a department.
  
- **Check 2**: Verify that `contact.name.family` and `contact.name.given` are blank for department contacts.
  - **Assertion**: `contact.name.family` is empty.
  - **Assertion**: `contact.name.given` is empty.

- **Check 3**: Ensure that the contact is indeed a department contact (e.g., by checking a specific identifier or type field if available).
  - **Assertion**: The contact type or identifier confirms it is a department.

- **Pass Criteria**: All assertions must be true for the test to pass, indicating conformance with the implementation guide requirement.

### Notes
- This test plan assumes that the system under test can distinguish between human contacts and department contacts based on the data model or metadata.
- The test should be executed in an environment where the Health Plan API is fully operational and contains relevant test data.
```


---



<a id='plan-net-organizationaffiliation'></a>

## Plan-Net OrganizationAffiliation

<a id='req-36'></a>

### REQ-36: Organization search by specialty

**Description**: "The Plan-Net design is based around the following types of searches: Organization by specialty - Example: Compounding Pharmacy - Focal Resource and Field: OrganizationAffiliation.specialty - Qualifications of Search: Location, network, name."

**Actor**: Health Plan API

**Conformance**: None (Design requirement)

# Test Specification for REQ-36: Organization Search by Specialty

## 1. Requirement ID
**REQ-36**

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically testable
- **Rationale**: The requirement specifies a search functionality that can be verified through automated testing by executing search queries and validating the results.

### Complexity
- **Complexity Level**: Moderate
- **Rationale**: The test involves multiple search parameters and requires validation against specific fields and resources, but it is straightforward in terms of execution.

### Prerequisites
- **System Configurations**: 
  - Access to a Health Plan API that implements the FHIR standard.
  - Proper authentication and authorization setup to access the API.
- **Data Setup**: 
  - The FHIR server should have `Organization`, `OrganizationAffiliation`, and `Location` resources populated with relevant data, including specialties such as "Compounding Pharmacy".
  - Ensure that `OrganizationAffiliation.specialty` fields are populated with valid codes from a recognized code system.

## 3. Test Implementation Strategy

### Required Inputs
- **FHIR Resources**: 
  - `OrganizationAffiliation` resources with `specialty` fields populated.
  - `Organization` resources linked to these affiliations.
  - `Location` resources associated with the organizations.
- **Search Parameters**: 
  - `OrganizationAffiliation.specialty` (token)
  - `Location` (reference)
  - `Network` (reference)
  - `Name` (string)

### Required FHIR Operations
- **API Calls/Operations**:
  - `GET [base]/OrganizationAffiliation?specialty=[specialty-code]`
  - `GET [base]/Organization?name=[organization-name]`
  - `GET [base]/Location?organization=[organization-id]`

### Validation Criteria
- **Search by Specialty**:
  - Execute a search query using `OrganizationAffiliation.specialty` with a known specialty code (e.g., "Compounding Pharmacy").
  - Validate that the returned `OrganizationAffiliation` resources have the `specialty` field matching the requested code.

- **Search by Location**:
  - For each `OrganizationAffiliation` returned, verify that the associated `Location` resources can be retrieved using the `location` search parameter.
  - Ensure the `Location` resources returned are correctly linked to the `OrganizationAffiliation`.

- **Search by Network and Name**:
  - Execute searches using `network` and `name` parameters to ensure organizations can be filtered by these attributes.
  - Validate that the returned `Organization` resources are part of the expected network and have the correct name.

- **General Assertions**:
  - Ensure all search operations return HTTP status code 200.
  - Validate that the response conforms to the FHIR standard, including correct resource types and structure.
  - Check that the search results are consistent with the data setup, ensuring that the specialty, location, and network associations are accurate.

By following this test specification, testers can verify the interoperability conformance of the Health Plan API's implementation of organization search by specialty, ensuring that it meets the requirements outlined in the FHIR Implementation Guide.

---



<a id='plan-net-practitionerrole'></a>

## Plan-Net PractitionerRole

<a id='req-35'></a>

### REQ-35: Provider search by specialty

**Description**: "The Plan-Net design is based around the following types of searches: Provider by Specialty - Example: Cardiologist - Focal Resource and Field: PractitionerRole.specialty - Qualifications of Search: Location, network, name."

**Actor**: Health Plan API

**Conformance**: None (Design requirement)

# Test Specification for Requirement REQ-35

## 1. Requirement ID
**REQ-35**: Provider search by specialty

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically Testable
- **Rationale**: The requirement specifies a search functionality that can be directly tested using FHIR search operations on the `PractitionerRole` resource with the `specialty` search parameter.

### Complexity
- **Classification**: Moderate
- **Rationale**: The requirement involves multiple search parameters and requires validation of search results based on specialty, location, network, and name.

### Prerequisites
- **System Configurations**: 
  - A FHIR server implementing the Health Plan API with support for the `PractitionerRole` resource.
- **Data Requirements**:
  - `PractitionerRole` resources with various specialties, locations, networks, and practitioner names.
  - `Location` resources associated with `PractitionerRole` resources.
  - `Practitioner` resources with names that can be searched.
- **Setup**:
  - Ensure the FHIR server is accessible and properly configured to handle search requests.

## 3. Test Implementation Strategy

### Required Inputs
- **FHIR Resources**:
  - `PractitionerRole` with `specialty`, `location`, `network`, and `practitioner` references.
  - `Location` resources with address details.
  - `Practitioner` resources with `name` attributes.
- **Expected Outputs**:
  - A list of `PractitionerRole` resources filtered by the specified specialty and optionally by location, network, and practitioner name.

### Required FHIR Operations
- **Search Operation**: 
  - `GET [base]/PractitionerRole?specialty=[code]`
  - Optional filters:
    - `GET [base]/PractitionerRole?specialty=[code]&location=[reference]`
    - `GET [base]/PractitionerRole?specialty=[code]&network=[reference]`
    - `GET [base]/PractitionerRole?specialty=[code]&practitioner=[name]`

### Validation Criteria
- **Conformance Checks**:
  - **Search by Specialty**: Ensure that the returned `PractitionerRole` resources have the specified `specialty`.
  - **Filter by Location**: If a location filter is applied, verify that the `PractitionerRole` resources are associated with the specified location.
  - **Filter by Network**: If a network filter is applied, ensure that the `PractitionerRole` resources are part of the specified network.
  - **Filter by Practitioner Name**: If a practitioner name filter is applied, confirm that the `PractitionerRole` resources are linked to practitioners with matching names.
- **Assertions**:
  - The response should include only `PractitionerRole` resources that meet all specified search criteria.
  - The response should be in a valid FHIR format and conform to the FHIR specification for search results.
  - The server should handle invalid search parameters gracefully, returning appropriate error messages as per FHIR standards.

This test specification ensures that the Health Plan API can support provider searches by specialty, with optional filtering by location, network, and practitioner name, in compliance with the FHIR Implementation Guide requirements.

---

<a id='req-37'></a>

### REQ-37: Search for active practitioners and organizations

**Description**: "Sample query to search for currently active Practitioners (replace date in query with current date): http://davinci-plan-net-ri.logicahealth.org/fhir/PractitionerRole?_include=PractitionerRole:date=ge2021-10-25. Sample query to search for currently active Organizations (replace date in query with current date): http://davinci-plan-net-ri.logicahealth.org/fhir/OrganizationAffiliation?_include=OrganizationAffiliation:date=ge2021-10-25."

**Actor**: Health Plan API

**Conformance**: None (Implementation example)

# Test Specification for Requirement REQ-37

## 1. Requirement ID
**REQ-37**: Search for active practitioners and organizations

## 2. Requirement Analysis

### Testability Assessment
- **Classification**: Automatically testable
- **Rationale**: The requirement involves executing specific FHIR queries and verifying the returned results, which can be automated.

### Complexity
- **Classification**: Moderate
- **Rationale**: The test involves multiple resources and requires dynamic date handling to ensure the queries are executed with the current date.

### Prerequisites
- **System Configurations**: 
  - Access to a FHIR server that implements the Da Vinci Plan Net Implementation Guide.
  - API client capable of making FHIR RESTful calls.
- **Data Requirements**:
  - The FHIR server must contain PractitionerRole and OrganizationAffiliation resources with varying active dates.
- **Setup**:
  - Ensure the server's base URL is correctly configured in the API client.
  - Current date must be dynamically inserted into the query.

## 3. Test Implementation Strategy

### Required Inputs
- **FHIR Resources**: 
  - PractitionerRole
  - OrganizationAffiliation
- **Expected Outputs**:
  - A list of PractitionerRole resources where the active date is greater than or equal to the current date.
  - A list of OrganizationAffiliation resources where the active date is greater than or equal to the current date.

### Required FHIR Operations
- **API Calls**:
  - `GET [base]/PractitionerRole?_include=PractitionerRole:date=ge[current-date]`
  - `GET [base]/OrganizationAffiliation?_include=OrganizationAffiliation:date=ge[current-date]`
- **Supported Operations**: 
  - Search operations as specified in the Capability Statement.

### Validation Criteria
- **PractitionerRole Search Validation**:
  - Verify that the response contains PractitionerRole resources.
  - Check that each returned PractitionerRole has an active date greater than or equal to the current date.
  - Ensure the response adheres to the FHIR specification (e.g., correct resource type, valid JSON structure).

- **OrganizationAffiliation Search Validation**:
  - Verify that the response contains OrganizationAffiliation resources.
  - Check that each returned OrganizationAffiliation has an active date greater than or equal to the current date.
  - Ensure the response adheres to the FHIR specification (e.g., correct resource type, valid JSON structure).

- **General Validation**:
  - Confirm that the server supports the required search parameters as per the Capability Statement.
  - Validate the HTTP response code (should be 200 OK for successful searches).
  - Ensure that the response time is within acceptable limits for performance considerations.

By following this test specification, testers can verify that the FHIR server correctly implements the search functionality for active practitioners and organizations as outlined in the Da Vinci Plan Net Implementation Guide.

---



